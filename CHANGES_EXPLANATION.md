# –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –ø—Ä–æ–µ–∫—Ç–µ - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 404 –æ—à–∏–±–æ–∫ API

## üö® –ü—Ä–æ–±–ª–µ–º–∞

–§—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–∞ Vercel –ø–æ–ª—É—á–∞–µ—Ç **404 –æ—à–∏–±–∫–∏** –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Å `/api/symbols` –∏ `/api/analyze`. –í Network tab –±—Ä–∞—É–∑–µ—Ä–∞ –≤–∏–¥–Ω—ã –∑–∞–ø—Ä–æ—Å—ã –∫ —ç—Ç–∏–º endpoints, –Ω–æ –æ–Ω–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç 404.

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã

### 1. **Mixed Content Policy**
- Frontend –Ω–∞ Vercel —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ **HTTPS**
- Backend –Ω–∞ AWS —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ **HTTP** (`http://13.50.4.32:8000`)
- –ë—Ä–∞—É–∑–µ—Ä—ã –±–ª–æ–∫–∏—Ä—É—é—Ç HTTPS ‚Üí HTTP –∑–∞–ø—Ä–æ—Å—ã –∏–∑ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### 2. **CORS –∏ Routing**
- Frontend –ø—ã—Ç–∞–µ—Ç—Å—è –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ backend –Ω–∞–ø—Ä—è–º—É—é
- Vercel –Ω–µ –∑–Ω–∞–µ—Ç, –∫–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å `/api/*` –∑–∞–ø—Ä–æ—Å—ã
- –ù–µ—Ç –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è –º–µ–∂–¥—É frontend –∏ backend

## üõ†Ô∏è –ü–æ–ø—ã—Ç–∫–∏ —Ä–µ—à–µ–Ω–∏—è

### –ü–æ–ø—ã—Ç–∫–∞ 1: Vercel Functions (–ù–ï –°–†–ê–ë–û–¢–ê–õ–ê)
–°–æ–∑–¥–∞–ª–∏ Vercel Functions –≤ –ø–∞–ø–∫–µ `api/` –¥–ª—è –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤:

```javascript
// api/symbols.js
module.exports = async (req, res) => {
    const backendUrl = 'http://13.50.4.32:8000/api/symbols';
    const response = await fetch(backendUrl);
    // ... –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
};
```

**–ü—Ä–æ–±–ª–µ–º–∞**: Vercel Functions –Ω–µ –º–æ–≥—É—Ç –¥–µ–ª–∞—Ç—å HTTP –∑–∞–ø—Ä–æ—Å—ã –∫ –≤–Ω–µ—à–Ω–∏–º —Å–µ—Ä–≤–µ—Ä–∞–º –≤ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–º –ø–ª–∞–Ω–µ.

### –ü–æ–ø—ã—Ç–∫–∞ 2: vercel.json rewrites (–¢–ï–ö–£–©–ï–ï –†–ï–®–ï–ù–ò–ï)
–û–±–Ω–æ–≤–∏–ª–∏ `frontend/vercel.json`:

```json
{
    "framework": "vite",
    "installCommand": "npm install",
    "buildCommand": "npm run build",
    "outputDirectory": "dist",
    "rewrites": [
        {
            "source": "/api/(.*)",
            "destination": "http://13.50.4.32:8000/$1"
        }
    ]
}
```

**–õ–æ–≥–∏–∫–∞**: –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∫ `/api/*` –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞—Ç—å—Å—è –∫ backend.

## üîß –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. **–°–æ–∑–¥–∞–Ω –µ–¥–∏–Ω—ã–π API helper** (`frontend/src/apiBase.js`)

```javascript
const RAW = import.meta.env.VITE_API_URL || '/api';
export const API_BASE_URL = RAW.replace(/\/$/, '');
export const apiUrl = (p = '') => `${API_BASE_URL}/${String(p).replace(/^\//, '')}`;

// Debug logging
console.log('API_BASE_URL =', API_BASE_URL);
console.log('Environment:', import.meta.env.MODE);
console.log('VITE_API_URL =', import.meta.env.VITE_API_URL);
```

**–¶–µ–ª—å**: –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–µ API –≤—ã–∑–æ–≤—ã –≤–æ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö.

### 2. **–û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**

#### App.jsx
```javascript
import { apiUrl } from './apiBase';

const handleAnalysis = async (formData) => {
    const url = apiUrl('analyze');
    console.log('Sending analysis request to:', url);
    // ... fetch –ª–æ–≥–∏–∫–∞
};
```

#### CurrencySelector/index.jsx
```javascript
import { apiUrl } from '../../apiBase';

const fetchSymbols = async () => {
    const url = apiUrl('symbols');
    console.log('Fetching symbols from:', url);
    // ... fetch –ª–æ–≥–∏–∫–∞
};
```

**–¶–µ–ª—å**: –í—Å–µ API –≤—ã–∑–æ–≤—ã –∏–¥—É—Ç —á–µ—Ä–µ–∑ `/api/*` endpoints.

### 3. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω vercel.json**
–î–æ–±–∞–≤–ª–µ–Ω—ã rewrites –¥–ª—è –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è `/api/*` –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ backend.

### 4. **–£–¥–∞–ª–µ–Ω—ã –Ω–µ–Ω—É–∂–Ω—ã–µ —Ñ–∞–π–ª—ã**
- –£–±—Ä–∞–ª–∏ Vercel Functions (`api/*.js`)
- –£–±—Ä–∞–ª–∏ root `package.json`
- –û—á–∏—Å—Ç–∏–ª–∏ –ø—Ä–æ–µ–∫—Ç –æ—Ç –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –∫–æ–¥–∞

### 5. **–î–æ–±–∞–≤–ª–µ–Ω vite.svg**
–°–æ–∑–¥–∞–ª–∏ `frontend/public/vite.svg` –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è 404 –æ—à–∏–±–æ–∫ –Ω–∞ –∏–∫–æ–Ω–∫—É.

## üéØ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π:

1. **–í development —Ä–µ–∂–∏–º–µ**: API calls –∏–¥—É—Ç –Ω–∞–ø—Ä—è–º—É—é –∫ backend
2. **–í production (Vercel)**: API calls –∏–¥—É—Ç —á–µ—Ä–µ–∑ `/api/*` ‚Üí Vercel –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –∫ backend
3. **–í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞** –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –ª–æ–≥–∏:
   ```
   API_BASE_URL = /api
   Environment: production
   VITE_API_URL = undefined
   ```
4. **–í Network tab** –∑–∞–ø—Ä–æ—Å—ã –¥–æ–ª–∂–Ω—ã –∏–¥—Ç–∏ –Ω–∞:
   - `/api/symbols` ‚Üí 200 OK
   - `/api/analyze` ‚Üí 200 OK

## üöÄ –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

### 1. **–õ–æ–∫–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞**
```bash
cd frontend
npm run dev
# –û—Ç–∫—Ä—ã—Ç—å http://localhost:5173
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Network tab
```

### 2. **Production –ø—Ä–æ–≤–µ—Ä–∫–∞**
- –°–æ–∑–¥–∞—Ç—å Pull Request
- –î–æ–∂–¥–∞—Ç—å—Å—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ –Ω–∞ Vercel
- –û—Ç–∫—Ä—ã—Ç—å `fastapi-binance-calculations.vercel.app`
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å –∏ Network tab

## üîç –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. **Vercel –Ω–µ –ø–æ–¥—Ö–≤–∞—Ç–∏–ª vercel.json**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ñ–∞–π–ª –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `frontend/vercel.json`
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ Vercel –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `frontend` –∫–∞–∫ Root Directory

### 2. **Backend –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `curl http://13.50.4.32:8000/health`
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ backend —Å–ª—É—à–∞–µ—Ç –Ω–∞ `0.0.0.0:8000`

### 3. **CORS –Ω–∞ backend**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ CORS –≤ `backend/app/main.py`
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ä–∞–∑—Ä–µ—à–µ–Ω—ã –≤—Å–µ origins

## üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–°–æ–∑–¥–∞—Ç—å Pull Request** —Å —ç—Ç–∏–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏
2. **–î–æ–∂–¥–∞—Ç—å—Å—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏** –Ω–∞ Vercel
3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å** API endpoints
4. **–ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç** - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Vercel –∏ backend

## üí° –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

–ï—Å–ª–∏ —Ç–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç:

### –í–∞—Ä–∏–∞–Ω—Ç 1: HTTPS –Ω–∞ backend
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –Ω–∞ AWS
- –û–±–Ω–æ–≤–∏—Ç—å backend URL –Ω–∞ HTTPS

### –í–∞—Ä–∏–∞–Ω—Ç 2: Vercel Edge Functions
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Edge Functions –≤–º–µ—Å—Ç–æ Serverless Functions
- –ë–æ–ª–µ–µ –≥–∏–±–∫–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö HTTP –∑–∞–ø—Ä–æ—Å–æ–≤

### –í–∞—Ä–∏–∞–Ω—Ç 3: –î—Ä—É–≥–æ–π hosting
- –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å backend –Ω–∞ Vercel
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Cloudflare Workers –¥–ª—è –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è

## üìù –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ú—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª–∏ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã 404 –æ—à–∏–±–æ–∫:
- –ï–¥–∏–Ω—ã–π API helper –¥–ª—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏
- Vercel rewrites –¥–ª—è –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è
- Debug –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- –û—á–∏—Å—Ç–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ –æ—Ç –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –∫–æ–¥–∞

–û—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è: –≤—Å–µ API –∑–∞–ø—Ä–æ—Å—ã –∏–¥—É—Ç —á–µ—Ä–µ–∑ `/api/*` endpoints, –∫–æ—Ç–æ—Ä—ã–µ Vercel –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –∫ backend, —Ä–µ—à–∞—è –ø—Ä–æ–±–ª–µ–º—É Mixed Content Policy.
